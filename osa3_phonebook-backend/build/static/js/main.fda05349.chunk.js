(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(15),r=n.n(a),c=n(2),o=n(6),u=n(3),s=n(4),l=n.n(s),j="/api/persons",d={getList:function(){return l.a.get(j)},create:function(e){return l.a.post(j,e)},remove:function(e){return l.a.delete("".concat(j,"/").concat(e))},update:function(e){return l.a.put("".concat(j,"/").concat(e.id),e)}},m=(n(39),function(e){var t=e.persons,n=e.searchName,a=e.handlePoista;if(""===n)return Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:t.map((function(e){return Object(i.jsx)(b,{person:e,handlePoista:a},e.name)}))})});var r=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:r.map((function(e){return Object(i.jsx)(b,{person:e,handlePoista:a},e.name)}))})})}),b=function(e){var t=e.person,n=e.handlePoista;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("li",{children:[t.name," ",t.number," ",Object(i.jsx)("button",{onClick:function(){return n(t)},children:"poista"})]})})},f=function(e){var t=e.arvo,n=e.kasittelija;return Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["hae nimell\xe4 ",Object(i.jsx)("input",{value:t,onChange:n})]})})},h=function(e){var t=e.nimi,n=e.numero,a=e.nimikasittelija,r=e.numerokasittelija,c=e.lisaaja;return Object(i.jsxs)("form",{onSubmit:c,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:a})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:n,onChange:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.msg;return null===t?null:"green"===t.color?Object(i.jsx)("div",{className:"viestiGreen",children:t.text}):Object(i.jsx)("div",{className:"viestiRed",children:t.text})},x=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),l=s[0],j=s[1],b=Object(c.useState)(""),x=Object(u.a)(b,2),v=x[0],p=x[1],g=Object(c.useState)(""),k=Object(u.a)(g,2),w=k[0],P=k[1],C=Object(c.useState)(null),L=Object(u.a)(C,2),S=L[0],N=L[1];Object(c.useEffect)((function(){d.getList().then((function(e){a(e.data)}))}),[]);var y=function(e){N(e),setTimeout((function(){N(null)}),3e3)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Puhelinluettelo"}),Object(i.jsx)(f,{arvo:v,kasittelija:function(e){console.log(e.target.value),p(e.target.value)}}),Object(i.jsx)("h3",{children:"Lis\xe4\xe4 uusi"}),Object(i.jsx)(O,{msg:S}),Object(i.jsx)(h,{nimi:l,numero:w,nimikasittelija:function(e){j(e.target.value)},numerokasittelija:function(e){P(e.target.value)},lisaaja:function(e){e.preventDefault();var t={name:l,number:w};if(j(""),P(""),n.some((function(e){return e.name===t.name})))if(n.some((function(e){return e.name===t.name&&e.number!==t.number}))){if(window.confirm("P\xe4ivitet\xe4\xe4nk\xf6 numero henkil\xf6lle "+t.name+"?")){var i=n.find((function(e){return e.name===t.name})),r=Object(o.a)(Object(o.a)({},i),{},{number:t.number});d.update(r).then((function(e){e.data.name?(a(n.map((function(n){return n.name!==t.name?n:e.data}))),y({text:"P\xe4ivitys onnistui",color:"green"})):(a(n.filter((function(e){return e.id!==i.id}))),y({text:"".concat(t.name," tietoja ei en\xe4\xe4 ole olemassa"),color:"red"}))})).catch((function(e){y({text:e.response.data.error,color:"red"})}))}}else y({text:"".concat(t.name," on jo listalla"),color:"red"});else d.create(t).then((function(e){a(n.concat(e.data)),y({text:"Lis\xe4ys onnistui",color:"green"})})).catch((function(e){y({text:e.response.data.error,color:"red"})}))}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(m,{persons:n,searchName:v,handlePoista:function(e){!0===window.confirm("Haluatko varmasti poistaa "+e.name+" listalta?")&&(d.remove(e.id).then((function(t){a(n.filter((function(t){return t.id!==e.id})))})),y({text:"".concat(e.name," poistettu"),color:"green"}))}})]})};r.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.fda05349.chunk.js.map